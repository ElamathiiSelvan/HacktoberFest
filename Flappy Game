from random import randrange
from turtle import *
from freegames import vector

bird = vector(0, 0)
balls = []

def tap(x, y):
    "Move bird up in response to screen tap."
    up = vector(0, 30)
    bird.move(up)

def inside(point):
    "Return True if point on screen."
    return -200 < point.x < 200 and -200 < point.y < 200

def draw(alive):
    "Draw screen objects."
    clear()

    goto(bird.x, bird.y)
    dot(10, 'green' if alive else 'red')  # Set dot color based on alive status

    for ball in balls:
        goto(ball.x, ball.y)
        dot(20, 'black')

    update()

def move():
    "Update object positions."
    bird.y -= 5  # Move bird down by 5 pixels

    for ball in balls:
        ball.x -= 3  # Move balls left by 3 pixels

    # Randomly generate a new ball
    if randrange(10) == 0:
        y = randrange(-199, 199)
        ball = vector(199, y)
        balls.append(ball)

    # Remove balls that are outside the screen
    while len(balls) > 0 and not inside(balls[0]):
        balls.pop(0)

    # Check if the bird is out of bounds
    if not inside(bird):
        draw(False)
        return

    # Check for collisions between bird and balls
    for ball in balls:
        if abs(ball - bird) < 15:  # Adjusted for collision detection
            draw(False)
            return

    draw(True)  # Draw the game screen if alive
    ontimer(move, 50)  # Continue moving

# Game setup
setup(420, 420, 370, 0)
hideturtle()
up()
tracer(False)
onscreenclick(tap)  # Set up the click event to move the bird
move()  # Start the move loop
done()  # Finish the setup
